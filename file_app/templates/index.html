{% extends "base.html" %}
{% load static %}
{% block content %}

                <!-- Begin Page Content -->
                <div class="container-fluid">
                    <!-- Content Row -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">CHMSU - ARCHIVES FILING SYSTEM</h1>
                    </div>
                    <div class="row">
                        <!-- Card -->
                <div class="col-xl-3 col-md-4 mb-4">
                    <div class="card bg-primary shadow h-100 py-2">
                         <div class="card-body">
                       <div class="row no-gutters align-items-center">
                   <div class="col mr-2">
               <div class="text-xs font-weight-bold text-white text-uppercase mb-1">
                        Faculty</div>
                    <div class="h5 mb-0 font-weight-bold text-gray-800">{{faculty_count}}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-users fa-2x text-gray-300"></i>
                  </div>
                       </div>
                        </div>
                             </div>
                                </div>

                            <!-- Card -->
              <div class="col-xl-3 col-md-4 mb-4">
                <div class="card bg-success shadow h-100 py-2">
                           <div class="card-body">
                             <div class="row no-gutters align-items-center">
                   <div class="col mr-2">
                       <div class="text-xs font-weight-bold text-white text-uppercase mb-1">
                        Staff</div>
                       <div class="h5 mb-0 font-weight-bold text-gray-800">{{staff_count}}</div>
                  </div>
                  <div class="col-auto">
                      <i class="fas fa-users fa-2x text-gray-300"></i>
                   </div>
                  </div>
                  </div>
                    </div>
                        </div>

                        <!-- Card -->
            <div class="col-xl-3 col-md-4 mb-4">
                 <div class="card bg-warning shadow h-100 py-2">
                      <div class="card-body">
                      <div class="row no-gutters align-items-center">
                     <div class="col mr-2">
                      <div class="text-xs font-weight-bold text-white text-uppercase mb-1">Department
                        </div>
                      <div class="row no-gutters align-items-center">
                        <div class="col-auto">
                            <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">{{ department_count }}</div>
                        </div>
                    </div>
                </div>
                     <div class="col-auto">
                          <i class="fas fa-building fa-2x text-gray-300"></i>
                       </div>
                    </div>
                </div>
              </div>
            </div>
                        <!-- Card -->
                <div class="col-xl-3 col-md-4 mb-4">
                    <div class="card bg-secondary shadow h-100 py-2">
                         <div class="card-body">
                              <div class="row no-gutters align-items-center">
                                  <div class="col mr-2">
                                     <div class="text-xs font-weight-bold text-white text-uppercase mb-1">Total Files
                                 </div>
                             <div class="row no-gutters align-items-center">
                          <div class="col-auto">
                     <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800"> {{ total_files_count }}</div>
                </div>
            </div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-folder fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
              </div>
                </div>
            </div>

                    <div class="row">

                    <!-- Area Chart -->
                    <div class="col-xl-8 col-lg-7">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div
                                class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">Documents</h6>

                            </div>
                            <!-- Card Body -->
                            <div class="chart-container">
                                <canvas id="documentsChart" width="800" height="340"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <h4 style="margin-bottom: 20px;">Recently Added Documents</h4>
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="heading-label">Faculties</h6>
                        <div class="list-group" style="max-height: 200px; overflow-y: auto;">
                            {% for document in recent_faculty_documents %}
                            <a href="{% url 'faculty_archives_list' %}" class="list-group-item list-group-item-action">
                                {{ document.subject }} document recently added to {{ document.faculty }}
                            </a>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <h6 class="heading-label">Staffs</h6>
                        <div class="list-group" style="max-height: 200px; overflow-y: auto;">
                            {% for document in recent_staff_documents %}
                            <a href="{% url 'staff_archives_list' %}" class="list-group-item list-group-item-action">
                                {{ document.subject }} document recently added to {{ document.staff }}
                            </a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <!-- /.container-fluid -->
            </div>
        </div>

<!-- Page level plugins -->
<script src="{% static 'vendor/chart.js/Chart.min.js' %}"></script>

<!-- Page level custom scripts -->
<script src="{% static 'js/demo/chart-pie-demo.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    var customColors = [
        'rgba(105, 171, 198, 0.8)',
        'rgba(225, 118, 109, 0.8)',
    ];

    var ctx = document.getElementById('documentsChart').getContext('2d');
    var documentsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Faculty', 'Staff'],
            datasets: [{
                label: 'Number of Documents',
                data: [{{ faculty_documents_count }}, {{ staff_documents_count }}],
                backgroundColor: customColors,
                borderColor: customColors.map(color => color.replace('0.8', '1')),
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom',
                    labels: {
                        font: {
                            size: 14,
                            weight: 'bold'
                        }
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    titleFont: {
                        size: 16,
                        weight: 'bold'
                    },
                    bodyFont: {
                        size: 14
                    }
                }
            },
            scales: {
                x: {
                    grid: {
                        display: false,
                    },
                    ticks: {
                        color: 'rgba(0, 0, 0, 0.7)',
                        font: {
                            size: 14,
                            weight: 'bold'
                        }
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(0, 0, 0, 0.1)',
                    },
                    ticks: {
                        color: 'rgba(0, 0, 0, 0.7)',
                        font: {
                            size: 14,
                            weight: 'bold'
                        },
                        callback: function (value) {
                            return value.toLocaleString();
                        }
                    }
                }
            }
        }
    });
</script>
<style>
    .chart-container {
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

</style>
{% endblock content %}

